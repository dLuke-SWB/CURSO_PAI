<div class="login-wrapper">

    <div class="form-side">
        <div class="form-content">
            
            <div class="logo-area">
                <i class="bi bi-camera2"></i>
                <span class="typewriter">{{ logoText }}</span>
            </div>

            <h1>{{ temToken ? 'Definir Nova Senha' : 'Recuperar Conta' }}</h1>
            
            <p class="subtitle" *ngIf="!mensagemSucesso">
                {{ temToken 
                   ? 'Crie uma senha forte para proteger sua conta.' 
                   : 'Insira seu e-mail para receber o link de recuperação.' }}
            </p>

            <div *ngIf="mensagemSucesso" class="success-msg">
                <i class="bi bi-check-circle-fill me-2"></i> {{ mensagemSucesso }}
            </div>

            <div *ngIf="mensagemErro" class="error-msg">
                <i class="bi bi-exclamation-circle me-1"></i> {{ mensagemErro }}
            </div>

            <form *ngIf="!temToken && !mensagemSucesso">
                <div class="custom-input">
                    <label>E-mail cadastrado</label>
                    <input type="email" name="email" [(ngModel)]="email" placeholder="exemplo@email.com" (keyup.enter)="enviarLink()">
                </div>

                <button type="button" class="btn-login" (click)="enviarLink()" [disabled]="isLoading">
                    {{ isLoading ? 'Enviando...' : 'Enviar Link' }}
                </button>
            </form>

            <form *ngIf="temToken && !mensagemSucesso">
                
                <div class="custom-input">
                    <label>Nova Senha</label>
                    <div class="password-wrapper">
                        <input [type]="showPassword ? 'text' : 'password'" name="senha" [(ngModel)]="senha" placeholder="••••••••">
                        <button type="button" class="btn-eye" (click)="showPassword = !showPassword">
                            <i class="bi" [class.bi-eye-fill]="showPassword" [class.bi-eye-slash-fill]="!showPassword"></i>
                        </button>
                    </div>
                </div>

                <div class="custom-input">
                    <label>Confirmar Senha</label>
                    <div class="password-wrapper">
                        <input [type]="showConfirmPassword ? 'text' : 'password'" name="confirmSenha" [(ngModel)]="confirmarSenha" placeholder="••••••••">
                        <button type="button" class="btn-eye" (click)="showConfirmPassword = !showConfirmPassword">
                            <i class="bi" [class.bi-eye-fill]="showConfirmPassword" [class.bi-eye-slash-fill]="!showConfirmPassword"></i>
                        </button>
                    </div>
                </div>

                <button type="button" class="btn-login" (click)="alterarSenha()" [disabled]="isLoading">
                    {{ isLoading ? 'Salvando...' : 'Redefinir Senha' }}
                </button>
            </form>

            <p class="footer-text">
                <a href="javascript:void(0)" (click)="goToLogin()">Voltar para Login</a>
            </p>
        </div>
    </div>

    <div class="visual-side">
        <div class="grid-container">
            <div class="grid-item" *ngFor="let cell of gridCells">
                <div class="image-wrapper" [class.visible]="cell.active">
                    <img [src]="cell.image" alt="poster">
                </div>
            </div>
        </div>
        <div class="overlay-gradient"></div>
    </div>

</div>